# Configuration for Evidence Binding with DHRD
# Task: Identify and extract key evidence sentences from medical/scientific texts

# Model configuration
model:
  backbone: "gpt2"  # Options: gpt2, facebook/opt-125m, facebook/opt-350m, etc.
  num_labels: 2  # Binary: has_evidence (0/1)
  reasoning_weight: 0.5  # Weight for reasoning loss (lambda)
  pooling_method: "last"  # Options: last, mean
  classification_dropout: 0.1

# Data configuration
data:
  data_dir: "data/redsm5"
  evidence_column: "sentence"  # Column containing evidence ground truth
  status_filter: 1  # Use only rows with status=1
  text_columns: null  # Auto-detect (or specify: ["claim", "context"])
  binary_classification: true  # Binary: has evidence (0/1)
  max_length: 512  # Maximum sequence length for input
  max_rationale_length: 1024  # Maximum length for input+rationale
  include_rationales: true

# Training configuration
training:
  num_epochs: 5
  batch_size: 8
  gradient_accumulation_steps: 1
  learning_rate: 2.0e-5
  weight_decay: 0.01
  warmup_ratio: 0.1
  max_grad_norm: 1.0
  seed: 42

# Optimizer configuration
optimizer:
  type: "adamw"
  adam_epsilon: 1.0e-8
  betas: [0.9, 0.999]

# Scheduler configuration
scheduler:
  type: "linear"  # Options: linear, cosine
  warmup_ratio: 0.1

# Logging configuration
logging:
  log_interval: 10  # Steps between logging
  eval_interval: 100  # Steps between evaluation
  save_interval: 500  # Steps between checkpoints
  output_dir: "outputs/evidence_binding"
  use_mlflow: true
  mlflow_experiment: "evidence_binding"

# Device configuration
device:
  use_cuda: true
  device: "cuda"  # Options: cuda, cpu, cuda:0, etc.

# Task-specific settings
evidence_binding:
  # Minimum evidence length to be considered valid
  min_evidence_length: 10

  # Maximum number of evidence sentences per sample
  max_evidence_sentences: 3

  # Evidence extraction strategy
  extraction_strategy: "sentence"  # Options: sentence, span, token

  # Evaluation metrics
  metrics:
    - "accuracy"
    - "precision"
    - "recall"
    - "f1"
